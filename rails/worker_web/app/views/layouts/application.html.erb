<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>sunyutech Worker</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 min-h-screen">
  <% if logged_in? %>
    <nav class="bg-blue-600 text-white shadow-lg">
      <div class="max-w-md mx-auto px-4">
        <div class="flex justify-between items-center h-14">
          <%= link_to "sunyutech", root_path, class: "text-lg font-bold" %>
          <div class="flex items-center space-x-2">
            <span class="text-sm"><%= current_worker.name %></span>
            <%= button_to "ログアウト", logout_path, method: :delete,
                class: "text-xs bg-blue-700 hover:bg-blue-800 px-2 py-1 rounded" %>
          </div>
        </div>
      </div>
    </nav>

    <div class="max-w-md mx-auto px-4 py-2">
      <div class="flex space-x-1 text-sm">
        <%= link_to "ホーム", root_path,
            class: "flex-1 text-center py-2 rounded #{current_page?(root_path) ? 'bg-blue-100 text-blue-700' : 'bg-white text-gray-600'}" %>
        <%= link_to "出勤履歴", attendances_path,
            class: "flex-1 text-center py-2 rounded #{controller_name == 'attendances' ? 'bg-blue-100 text-blue-700' : 'bg-white text-gray-600'}" %>
        <%= link_to "現場一覧", assignments_path,
            class: "flex-1 text-center py-2 rounded #{controller_name == 'assignments' ? 'bg-blue-100 text-blue-700' : 'bg-white text-gray-600'}" %>
      </div>
    </div>
  <% end %>

  <main class="max-w-md mx-auto px-4 py-4">
    <% if flash[:notice] %>
      <div class="bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded mb-4">
        <%= flash[:notice] %>
      </div>
    <% end %>
    <% if flash[:alert] %>
      <div class="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4">
        <%= flash[:alert] %>
      </div>
    <% end %>

    <%= yield %>
  </main>
</body>
</html>
